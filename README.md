# Мопсики. Коллектор
Наш коллектор за данными из внешних источников

Идея появилась, когда не смогли адекватно внедрить сборщик для телеграма, т.к. он использует собственную схему и не имеет вменяемой публичной API вне tdlib.

Фичи:
- Сбор информации по постам в vc.ru, habr и в Telegram
- Сбор комментариев постов в habr с анализом тональности

## Требования
- Доступ ко вводу в консоль, аккаунт телеграм
- Заполняемость .env
- Сервер с sent. анализом
- node v24+ и соответствующий npm

## Инструкция
- Склонировать репозиторий, перейти в рабочую директорию
- Заполнить .env
- Установить зависимости `npm ci`
- Запустить билд `npx tsc`
- Запустить сборщик `npm run start`
- (первый запуск) Ввести номер телефона от Tg
- (первый запуск) Ввести код доступа от Tg

## Заполнение env
- TG_API_HASH и TG_API_ID из my.telegram.org (заходить с выключенным ВПН)
- TG_CHANNEL_NAME, HABR_COLLECT_USER - username профиля, VC_COLLECT_USER - id профиля
- SENT_ANALYZE_URL - порт поднятого sent. аналайзера
- MWS_TABLE_ID и MWS_POSTS_TABLE нужно вставить путь до таблицы/представление, т.е. если запрос для работы с таблицей `https://tables.mws.ru/fusion/v1/datasheets/SOME_COOL_KEY/records?viewId=THE_DIFFERENT_VIEW&fieldKey=name`, нужно вписать `SOME_COOL_KEY` и `THE_DIFFERENT_VIEW` в соответствующие поля
- MWS_TABLES_API_KEY взять из MWS Tables
- 
